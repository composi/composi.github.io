<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="description" content="Composi is a JavaScript library for creating component-based interfaces. It uses the virtual DOM to make efficient updates to the DOM based on a component's data or state.">
  <meta name="keywords" content="javascript, framework, performance, small, fast, UI, programming, code, component, composi, chocolatechipui, chocolatechip-ui, reactive, virtual dom">
  <title>Composi - Documentación</title>
  <link rel="stylesheet" href="/css/styles.css">
  <link rel="stylesheet" href="/css/prism.css">
  <link rel="icon" type="image/png" href="/images/favicon-32x32.png" sizes="32x32" />
  <link rel="icon" type="image/png" href="/images/favicon-16x16.png" sizes="16x16" />
</head>
<body class='page'>
  <nav>
    <ul class='nav-menu'>
      <li class='nav-menu__item'>
        <a class='nav-menu__item__link' href="/index-es.html">
          <svg id='composi-logo' viewBox="0 0 300 300" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
            <title>Composi Logo</title>
            <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
              <g id="Composi-Logo-Solid" fill="#fff">
                <path d="M1.77635684e-15,0 L95,0 L95,38 L209,38 L209,0 L300,0 L300,94 L265,93.8571663 L265,209 L300,209 L300,300 L209,300 L209,265 L95,265 L95,300 L1.77635684e-15,300 L1.77635684e-15,209 L40,209 L40,94 L1.77635684e-15,93.8571663 L1.77635684e-15,0 Z M107,107 L107,192 L192,192 L192,107 L107,107 Z" id="Combined-Shape"></path>
              </g>
            </g>
          </svg>
        <span class='logo__link--text'>Composi</span></a>
      </li>
      <li class='nav-menu__item selected'>
        <a class='nav-menu__item__link' href="/es/docs/index.html">Documentación</a>
      </li>
    </ul>
  </nav>
  <article class='article'>
    <section>
      <div class='docs'>
        <h3>@composi/runtime:</h3>
        <ul class='breadcrumb'>
          <li><a href="/es/docs/runtime/runtime.html">Entorno de Ejecución</a></li>
          <li><a href="/es/docs/runtime/init.html">Init</a></li>
          <li><a href="/es/docs/runtime/view.html">View</a></li>
          <li><a href="/es/docs/runtime/update.html">Update</a></li>
          <li><a href="/es/docs/runtime/effects.html">Efectos</a></li>
          <li><a href="/es/docs/runtime/tagged-unions.html">Unión Etiquetada</a></li>
          <li><a href="/es/docs/runtime/subscriptions.html">Suscripciones</a></li>
          <li><a href="/es/docs/runtime/composition.html">Composición</a></li>
          <li><a href="/es/docs/runtime/end-program.html">Parar el Programa</a></li>
          <li class='selected'>Inmutabilidad</li>
          <li><a href="/es/docs/runtime/hop.html">Programa de Orden Superior</a></li>
        </ul>
          <h1>Inmutabilidad</h1>
          <h2>El Estado de un Program es Mutable</h2>
          <p>Por defecto, el estado de un programa es mutable cuando tienes acceso a él, tanto dentro de los métodos de update y
          view. Por otro lado, la función update es cómo modificas el estado de un programa. Para ejemplos simples, esto probablemente no será un problema. Al menos puedes usar la destructuración para create una copia somera del estado del programa, cómo en el ejemplo siguiente.</p>

          <pre><code class="language-javascript">function actions(estaado, mensaje) {
  // Clonar el estado por medio de la destructración:
  const estadoPrevio = {...estaado}
  return mensaje.match(mensaje, {
    // Chequear el mensaje de la etiqueta:
    'addItem': valor => {
      estadoPrevio.frutas.push({ key: estadoPrevio.newKey++, valor })
      // Renderizar la vista y actualizar el program al devolver el estado clonado:
      return estadoPrevio
    },
    // CChequear el mensaje de la etiqueta:
    'deleteItem': key => {
      estadoPrevio.frutas = estadoPrevio.frutas.filter(item => item.key != key)
      // Renderizar la vista y actualizar el program al devolver el estado clonado:
      return estadoPrevio
    }
  })
}</code></pre>

          <h2>Clon Profundo</h2>
          <p>Si el app y sus datos son complejos, a lo mejor vas a tener que creatr una copia profunda de los datos. Puedes realizar ésto dentro de la función <code>update</code> así cómo hicimos con la destructuración previamente. Sólo hay que importarlo de @composi/clone:</p>

<pre><code class="language-javascript">import { h, render, run, union } from '@composi/core'
import { clone } from '@composi/clone'

function acciones(estado, msj) {
  // Clonar el estado:
  const estadoPrevio = clone(estado)
  return Msj.match(msj, {
    // Chequear la etiqueta del mensaje:
    'añadirÍtem': value => {
      estadoPrevio.frutas.push({ key: estadoPrevio.newKey++, value })
      // Renderizar la vista y actualizar el estado del programa:
      return estadoPrevio
    },
    // Chequear la etiqueta del mensaje:
    'eliminarÍtem': key => {
      estadoPrevio.frutas = estadoPrevio.frutas.filter(item => item.key != key)
      // Renderizar la vista y actualizar el estado del programa:
      return estadoPrevio
    }
  })
}
</code></pre>
            <p>Por usar el técnico anterior de clonar el estado con <code>clone</code>, el programa no se actualizará hasta que el programa devuelva el estado clonado.</p>

              <p>&nbsp;</p>
      </div>
    </section>
  </article>
  <footer>
      <section>
        <svg id='composi-logo-footer' viewBox="0 0 300 300" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
          <title>Composi Logo</title>
          <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
            <g id="Composi-Logo-Solid" fill="rgba(255,255,255,0.5)">
              <path d="M1.77635684e-15,0 L95,0 L95,38 L209,38 L209,0 L300,0 L300,94 L265,93.8571663 L265,209 L300,209 L300,300 L209,300 L209,265 L95,265 L95,300 L1.77635684e-15,300 L1.77635684e-15,209 L40,209 L40,94 L1.77635684e-15,93.8571663 L1.77635684e-15,0 Z M107,107 L107,192 L192,192 L192,107 L107,107 Z" id="Combined-Shape"></path>
            </g>
          </g>
        </svg>
        <h3>Composi es código abierto (MIT) y está disponible en <a href='https://github.com/composi/core' target='__blank'>Github</a> y <a href="https://www.npmjs.com/package/@composi/core" target='__blank'>NPM</a>.</h3>
      </section>
    </footer>
  <script src="/js/prism.js"></script>


</body>
</html>
